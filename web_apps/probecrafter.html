<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Probecrafter — Probe Library for Strategic Programmes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      color-scheme: light;
      --bg: #0f172a;
      --bg-panel: #111c34;
      --bg-soft: #15213a;
      --ink: #f1f5f9;
      --ink-muted: #cbd5f5;
      --ink-soft: #a5b4fc;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.12);
      --accent-strong: #0ea5e9;
      --danger: #f87171;
      --success: #4ade80;
      --card-border: rgba(148, 163, 184, 0.25);
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      background: radial-gradient(circle at top, #1e293b, #0f172a 55%, #0b1120 100%);
      color: var(--ink);
      min-height: 100vh;
    }
    a { color: var(--accent); }
    header {
      padding: 32px 24px 20px;
      border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      background: linear-gradient(180deg, rgba(15, 23, 42, 0.85), rgba(15, 23, 42, 0.92));
    }
    header h1 {
      margin: 12px 0 8px;
      font-size: 32px;
      letter-spacing: -0.02em;
    }
    header p {
      margin: 4px 0;
      color: var(--ink-muted);
      max-width: 780px;
      line-height: 1.45;
    }
    .layout {
      display: grid;
      grid-template-columns: 280px 1fr 1fr;
      gap: 18px;
      padding: 24px;
    }
    .panel {
      background: var(--bg-panel);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 24px 45px rgba(8, 15, 32, 0.45);
    }
    .panel h2 {
      font-size: 18px;
      margin: 0 0 14px;
      letter-spacing: 0.02em;
      text-transform: uppercase;
      color: var(--ink-soft);
    }
    label { display: block; font-size: 13px; text-transform: uppercase; letter-spacing: 0.08em; color: var(--ink-soft); margin-bottom: 6px; }
    select {
      width: 100%;
      background: var(--bg-soft);
      color: var(--ink);
      border: 1px solid rgba(148, 163, 184, 0.35);
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 12px;
      font-size: 14px;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 12px;
      background: rgba(148, 163, 184, 0.15);
      color: var(--ink-soft);
    }
    .pack-list {
      display: grid;
      gap: 12px;
      max-height: 520px;
      overflow-y: auto;
      padding-right: 6px;
    }
    .pack-card {
      border: 1px solid rgba(148, 163, 184, 0.3);
      border-radius: 14px;
      padding: 14px;
      background: var(--bg-soft);
      cursor: pointer;
      transition: transform 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease;
    }
    .pack-card:hover {
      transform: translateY(-2px);
      border-color: var(--accent);
      box-shadow: 0 14px 30px rgba(14, 165, 233, 0.18);
    }
    .pack-card.active {
      border-color: var(--accent);
      background: rgba(14, 165, 233, 0.12);
      box-shadow: 0 16px 38px rgba(14, 165, 233, 0.28);
    }
    .pack-card h3 {
      margin: 0 0 6px;
      font-size: 18px;
    }
    .pack-card p {
      margin: 4px 0 10px;
      color: var(--ink-muted);
      font-size: 14px;
      line-height: 1.4;
    }
    .pack-card .meta {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }
    .detail {
      display: grid;
      gap: 14px;
    }
    .detail-header h2 {
      margin: 0;
      font-size: 26px;
    }
    .detail-header p {
      margin: 6px 0 12px;
      color: var(--ink-muted);
      line-height: 1.5;
    }
    .signal-list, .artefacts, .persona-tags, .question-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }
    .signal-list span {
      padding: 6px 10px;
      border-radius: 10px;
      background: rgba(248, 250, 252, 0.08);
      font-size: 13px;
      line-height: 1.3;
    }
    .question-card {
      border: 1px solid rgba(148, 163, 184, 0.25);
      border-radius: 14px;
      padding: 14px;
      background: rgba(15, 23, 42, 0.85);
      display: grid;
      gap: 10px;
    }
    .question-card h3 {
      margin: 0;
      font-size: 18px;
    }
    .question-card p {
      margin: 0;
      color: var(--ink-muted);
      line-height: 1.45;
    }
    .question-card ul {
      margin: 4px 0 0 18px;
      padding: 0;
      color: var(--ink-muted);
      line-height: 1.45;
    }
    .btn {
      appearance: none;
      border: 1px solid var(--accent);
      background: var(--accent-soft);
      color: var(--accent);
      font-size: 13px;
      padding: 8px 12px;
      border-radius: 999px;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease;
    }
    .btn:hover {
      background: var(--accent);
      color: #0f172a;
    }
    .session-board {
      margin: 0 24px 24px;
      background: var(--bg-panel);
      border-radius: 16px;
      border: 1px solid var(--card-border);
      padding: 20px;
      box-shadow: 0 18px 36px rgba(8, 12, 28, 0.45);
    }
    .session-board h2 {
      margin: 0 0 16px;
      color: var(--ink-soft);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 16px;
    }
    .session-items {
      display: grid;
      gap: 12px;
    }
    .session-item {
      border: 1px solid rgba(148, 163, 184, 0.25);
      border-radius: 12px;
      padding: 12px 14px;
      background: rgba(15, 23, 42, 0.8);
      display: grid;
      gap: 6px;
    }
    .session-item header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0;
      background: none;
      border: none;
    }
    .session-item header h3 {
      margin: 0;
      font-size: 16px;
    }
    .session-item p {
      margin: 0;
      color: var(--ink-muted);
      font-size: 14px;
    }
    .session-item button {
      border: none;
      background: rgba(248, 113, 113, 0.15);
      color: var(--danger);
      padding: 4px 10px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 12px;
    }
    .session-meta {
      margin-top: 12px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      color: var(--ink-soft);
      font-size: 13px;
    }
    .grid-section {
      margin: 0 24px 24px;
      display: grid;
      gap: 18px;
    }
    .grid-three {
      display: grid;
      gap: 18px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }
    .card {
      background: var(--bg-panel);
      border: 1px solid var(--card-border);
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 18px 36px rgba(7, 10, 24, 0.45);
    }
    .card h3 {
      margin: 0 0 10px;
      color: var(--ink-soft);
      font-size: 18px;
    }
    .card p {
      margin: 4px 0;
      color: var(--ink-muted);
      line-height: 1.5;
    }
    .card ul {
      margin: 6px 0 0 18px;
      color: var(--ink-muted);
      line-height: 1.4;
    }
    .score-item {
      background: rgba(148, 163, 184, 0.09);
      border-radius: 12px;
      padding: 14px;
      margin-top: 10px;
    }
    .badge {
      display: inline-block;
      padding: 4px 8px;
      background: rgba(56, 189, 248, 0.18);
      border-radius: 999px;
      font-size: 12px;
      margin-bottom: 8px;
    }
    footer {
      padding: 24px;
      text-align: center;
      font-size: 12px;
      color: rgba(148, 163, 184, 0.7);
    }
    @media (max-width: 1100px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .pack-list {
        max-height: none;
      }
    }
  </style>
</head>
<body>
  <header>
    <p><a href="../index.html">⬅ Back to Card Index</a></p>
    <h1>Probecrafter</h1>
    <p id="tagline">Loading probe library…</p>
    <p id="meta"></p>
  </header>

  <main class="layout">
    <section class="panel">
      <h2>Filters</h2>
      <div>
        <label for="personaFilter">Persona</label>
        <select id="personaFilter"></select>
      </div>
      <div>
        <label for="intentFilter">Intent</label>
        <select id="intentFilter"></select>
      </div>
      <div>
        <label for="phaseFilter">Delivery Phase</label>
        <select id="phaseFilter"></select>
      </div>
      <div>
        <p style="font-size:13px;color:var(--ink-muted);line-height:1.4;">
          Filters update the probe packs instantly. Use them to narrow the stack to a specific conversation.
        </p>
      </div>
    </section>

    <section class="panel">
      <h2>Probe Packs</h2>
      <div id="packList" class="pack-list"></div>
      <div id="emptyState" style="display:none;color:var(--ink-muted);font-size:14px;margin-top:8px;">No probe packs match the filters. Try widening your selection.</div>
    </section>

    <section class="panel" id="detailPanel">
      <div id="detail" class="detail"></div>
    </section>
  </main>

  <section class="session-board">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;">
      <h2>Session Board</h2>
      <button class="btn" id="resetSession">Clear Session</button>
    </div>
    <p style="margin:6px 0 16px;color:var(--ink-muted);max-width:720px;">
      Build a run-sheet by dropping probes into the board. They stay in the order you add them so you can rehearse the conversation flow.
    </p>
    <div id="sessionItems" class="session-items"></div>
    <div id="sessionEmpty" style="color:var(--ink-muted);font-size:14px;">No probes added yet. Select a pack and add questions to design a session.</div>
    <div id="sessionMeta" class="session-meta"></div>
  </section>

  <section class="grid-section">
    <h2 style="color:var(--ink-soft);text-transform:uppercase;letter-spacing:0.08em;font-size:16px;margin:0;">Persona Snapshots</h2>
    <div id="personaDeck" class="grid-three"></div>
  </section>

  <section class="grid-section">
    <h2 style="color:var(--ink-soft);text-transform:uppercase;letter-spacing:0.08em;font-size:16px;margin:0;">Session Templates</h2>
    <div id="templateDeck" class="grid-three"></div>
  </section>

  <section class="grid-section">
    <h2 style="color:var(--ink-soft);text-transform:uppercase;letter-spacing:0.08em;font-size:16px;margin:0;">Practice Scorecard</h2>
    <div id="scoreDeck" class="grid-three"></div>
  </section>

  <section class="grid-section">
    <h2 style="color:var(--ink-soft);text-transform:uppercase;letter-spacing:0.08em;font-size:16px;margin:0;">Coach Notes</h2>
    <div id="coachNotes" class="grid-three"></div>
  </section>

  <footer>
    Built for transformation leaders who need sharper conversations, faster. Data loads locally from <code>probecrafter.json</code>.
  </footer>

  <script>
    const state = {
      data: null,
      filters: {
        persona: 'All',
        intent: 'All',
        phase: 'All'
      },
      selectedPackId: null,
      session: []
    };

    const selects = {
      persona: document.getElementById('personaFilter'),
      intent: document.getElementById('intentFilter'),
      phase: document.getElementById('phaseFilter')
    };

    const tagLineEl = document.getElementById('tagline');
    const metaEl = document.getElementById('meta');
    const packListEl = document.getElementById('packList');
    const detailEl = document.getElementById('detail');
    const emptyStateEl = document.getElementById('emptyState');
    const sessionItemsEl = document.getElementById('sessionItems');
    const sessionEmptyEl = document.getElementById('sessionEmpty');
    const sessionMetaEl = document.getElementById('sessionMeta');
    const personaDeckEl = document.getElementById('personaDeck');
    const templateDeckEl = document.getElementById('templateDeck');
    const scoreDeckEl = document.getElementById('scoreDeck');
    const coachNotesEl = document.getElementById('coachNotes');

    function unique(list) {
      return Array.from(new Set(list));
    }

    function buildFilterOptions() {
      const { probePacks } = state.data;
      const personaOptions = ['All', ...unique(probePacks.flatMap(pack => pack.personaTags))];
      const intentOptions = ['All', ...unique(probePacks.map(pack => pack.intent))];
      const phaseOptions = ['All', ...unique(probePacks.map(pack => pack.phase))];

      const map = [
        ['persona', personaOptions],
        ['intent', intentOptions],
        ['phase', phaseOptions]
      ];

      map.forEach(([key, options]) => {
        const select = selects[key];
        select.innerHTML = '';
        options.forEach(option => {
          const opt = document.createElement('option');
          opt.value = option;
          opt.textContent = option;
          select.appendChild(opt);
        });
        select.value = state.filters[key];
        select.addEventListener('change', () => {
          state.filters[key] = select.value;
          renderPacks();
        });
      });
    }

    function passesFilters(pack) {
      const { persona, intent, phase } = state.filters;
      if (persona !== 'All' && !pack.personaTags.includes(persona)) return false;
      if (intent !== 'All' && pack.intent !== intent) return false;
      if (phase !== 'All' && pack.phase !== phase) return false;
      return true;
    }

    function renderPacks() {
      const packs = state.data.probePacks.filter(passesFilters);
      packListEl.innerHTML = '';
      if (!packs.length) {
        emptyStateEl.style.display = 'block';
        detailEl.innerHTML = '';
        state.selectedPackId = null;
        return;
      }
      emptyStateEl.style.display = 'none';

      packs.forEach(pack => {
        const card = document.createElement('article');
        card.className = 'pack-card' + (pack.id === state.selectedPackId ? ' active' : '');
        card.dataset.id = pack.id;
        const title = document.createElement('h3');
        title.textContent = pack.title;
        card.appendChild(title);

        const summary = document.createElement('p');
        summary.textContent = pack.summary;
        card.appendChild(summary);

        const meta = document.createElement('div');
        meta.className = 'meta';
        const intent = document.createElement('span');
        intent.className = 'pill';
        intent.textContent = pack.intent;
        meta.appendChild(intent);
        const phase = document.createElement('span');
        phase.className = 'pill';
        phase.textContent = pack.phase;
        meta.appendChild(phase);
        card.appendChild(meta);

        card.addEventListener('click', () => {
          state.selectedPackId = pack.id;
          renderPacks();
          renderDetail();
        });

        packListEl.appendChild(card);
      });

      if (!state.selectedPackId || !packs.some(pack => pack.id === state.selectedPackId)) {
        state.selectedPackId = packs[0].id;
      }
      renderDetail();
    }

    function renderDetail() {
      detailEl.innerHTML = '';
      const pack = state.data.probePacks.find(p => p.id === state.selectedPackId);
      if (!pack) {
        detailEl.innerHTML = '<p style="color: var(--ink-muted);">Select a pack to view the probes.</p>';
        return;
      }

      const header = document.createElement('div');
      header.className = 'detail-header';
      const h2 = document.createElement('h2');
      h2.textContent = pack.title;
      header.appendChild(h2);

      const summary = document.createElement('p');
      summary.textContent = pack.summary;
      header.appendChild(summary);

      const personaRow = document.createElement('div');
      personaRow.className = 'persona-tags';
      pack.personaTags.forEach(tag => {
        const span = document.createElement('span');
        span.className = 'pill';
        span.textContent = tag;
        personaRow.appendChild(span);
      });
      header.appendChild(personaRow);

      const signalWrap = document.createElement('div');
      signalWrap.innerHTML = '<h3 style="margin:18px 0 6px;font-size:16px;color:var(--ink-soft);">Signals to watch</h3>';
      const signals = document.createElement('div');
      signals.className = 'signal-list';
      pack.signals.forEach(signal => {
        const span = document.createElement('span');
        span.textContent = signal;
        signals.appendChild(span);
      });
      signalWrap.appendChild(signals);

      detailEl.appendChild(header);
      detailEl.appendChild(signalWrap);

      const questionHeading = document.createElement('h3');
      questionHeading.style.margin = '18px 0 6px';
      questionHeading.style.fontSize = '16px';
      questionHeading.style.color = 'var(--ink-soft)';
      questionHeading.textContent = 'Probes';
      detailEl.appendChild(questionHeading);

      pack.questions.forEach((question, idx) => {
        const qCard = document.createElement('article');
        qCard.className = 'question-card';

        const title = document.createElement('h3');
        title.textContent = `${idx + 1}. ${question.prompt}`;
        qCard.appendChild(title);

        const angle = document.createElement('p');
        angle.innerHTML = `<strong style="color:${'var(--ink-soft)'};font-size:13px;letter-spacing:0.05em;text-transform:uppercase;">Angle</strong> ${question.angle}`;
        qCard.appendChild(angle);

        if (question.whatToListenFor?.length) {
          const listenHeading = document.createElement('p');
          listenHeading.innerHTML = '<strong style="color:var(--ink-soft);font-size:13px;letter-spacing:0.05em;text-transform:uppercase;">Listen For</strong>';
          qCard.appendChild(listenHeading);
          const ul = document.createElement('ul');
          question.whatToListenFor.forEach(item => {
            const li = document.createElement('li');
            li.textContent = item;
            ul.appendChild(li);
          });
          qCard.appendChild(ul);
        }

        if (question.followUps?.length) {
          const followHeading = document.createElement('p');
          followHeading.innerHTML = '<strong style="color:var(--ink-soft);font-size:13px;letter-spacing:0.05em;text-transform:uppercase;">Follow Ups</strong>';
          qCard.appendChild(followHeading);
          const ul = document.createElement('ul');
          question.followUps.forEach(item => {
            const li = document.createElement('li');
            li.textContent = item;
            ul.appendChild(li);
          });
          qCard.appendChild(ul);
        }

        if (question.notes) {
          const notes = document.createElement('p');
          notes.innerHTML = `<strong style="color:var(--ink-soft);font-size:13px;letter-spacing:0.05em;text-transform:uppercase;">Coach Note</strong> ${question.notes}`;
          qCard.appendChild(notes);
        }

        const actions = document.createElement('div');
        actions.style.display = 'flex';
        actions.style.justifyContent = 'flex-end';

        const addBtn = document.createElement('button');
        addBtn.className = 'btn';
        addBtn.textContent = 'Add to Session';
        addBtn.addEventListener('click', () => {
          state.session.push({
            packId: pack.id,
            packTitle: pack.title,
            prompt: question.prompt,
            angle: question.angle
          });
          renderSession();
        });
        actions.appendChild(addBtn);
        qCard.appendChild(actions);

        detailEl.appendChild(qCard);
      });

      if (pack.artefacts?.length) {
        const artefacts = document.createElement('div');
        artefacts.style.marginTop = '16px';
        artefacts.innerHTML = '<h3 style="margin:0 0 8px;font-size:16px;color:var(--ink-soft);">Artifacts to bring</h3>';
        const chipRow = document.createElement('div');
        chipRow.className = 'signal-list';
        pack.artefacts.forEach(item => {
          const span = document.createElement('span');
          span.textContent = item;
          chipRow.appendChild(span);
        });
        artefacts.appendChild(chipRow);
        detailEl.appendChild(artefacts);
      }
    }

    function renderSession() {
      sessionItemsEl.innerHTML = '';
      sessionMetaEl.innerHTML = '';

      if (!state.session.length) {
        sessionEmptyEl.style.display = 'block';
        return;
      }
      sessionEmptyEl.style.display = 'none';

      state.session.forEach((item, index) => {
        const card = document.createElement('article');
        card.className = 'session-item';
        const header = document.createElement('header');
        const title = document.createElement('h3');
        title.textContent = `${index + 1}. ${item.prompt}`;
        header.appendChild(title);
        const remove = document.createElement('button');
        remove.type = 'button';
        remove.textContent = 'Remove';
        remove.addEventListener('click', () => {
          state.session.splice(index, 1);
          renderSession();
        });
        header.appendChild(remove);
        card.appendChild(header);

        const packLabel = document.createElement('p');
        packLabel.innerHTML = `<strong style="color:var(--ink-soft);">Pack:</strong> ${item.packTitle}`;
        card.appendChild(packLabel);

        const angle = document.createElement('p');
        angle.innerHTML = `<strong style="color:var(--ink-soft);">Angle:</strong> ${item.angle}`;
        card.appendChild(angle);

        sessionItemsEl.appendChild(card);
      });

      const uniquePacks = unique(state.session.map(item => item.packTitle)).length;
      const total = state.session.length;
      const meta = document.createElement('div');
      meta.textContent = `${total} probe${total !== 1 ? 's' : ''} / ${uniquePacks} pack${uniquePacks !== 1 ? 's' : ''}`;
      sessionMetaEl.appendChild(meta);
    }

    function renderPersonas() {
      personaDeckEl.innerHTML = '';
      state.data.personas.forEach(persona => {
        const card = document.createElement('article');
        card.className = 'card';
        const title = document.createElement('h3');
        title.textContent = persona.name;
        card.appendChild(title);

        const mission = document.createElement('p');
        mission.innerHTML = `<strong style="color:var(--ink-soft);">Mission:</strong> ${persona.mission}`;
        card.appendChild(mission);

        const frictionTitle = document.createElement('p');
        frictionTitle.innerHTML = '<strong style="color:var(--ink-soft);">Frictions</strong>';
        card.appendChild(frictionTitle);
        const frictionList = document.createElement('ul');
        persona.frictions.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item;
          frictionList.appendChild(li);
        });
        card.appendChild(frictionList);

        const noticeTitle = document.createElement('p');
        noticeTitle.innerHTML = '<strong style="color:var(--ink-soft);">What they notice</strong>';
        card.appendChild(noticeTitle);
        const noticeList = document.createElement('ul');
        persona.whatTheyNotice.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item;
          noticeList.appendChild(li);
        });
        card.appendChild(noticeList);

        personaDeckEl.appendChild(card);
      });
    }

    function renderTemplates() {
      templateDeckEl.innerHTML = '';
      state.data.sessionTemplates.forEach(template => {
        const card = document.createElement('article');
        card.className = 'card';
        const title = document.createElement('h3');
        title.textContent = template.name;
        card.appendChild(title);

        const goal = document.createElement('p');
        goal.innerHTML = `<strong style="color:var(--ink-soft);">Goal:</strong> ${template.goal}`;
        card.appendChild(goal);

        const duration = document.createElement('p');
        duration.innerHTML = `<span class="badge">${template.duration}</span>`;
        card.appendChild(duration);

        if (template.recommendedProbes?.length) {
          const rec = document.createElement('p');
          rec.innerHTML = `<strong style="color:var(--ink-soft);">Probe Packs:</strong> ${template.recommendedProbes.join(', ')}`;
          card.appendChild(rec);
        }

        const stepsTitle = document.createElement('p');
        stepsTitle.innerHTML = '<strong style="color:var(--ink-soft);">Steps</strong>';
        card.appendChild(stepsTitle);
        const stepList = document.createElement('ul');
        template.steps.forEach(step => {
          const li = document.createElement('li');
          li.textContent = step;
          stepList.appendChild(li);
        });
        card.appendChild(stepList);

        if (template.outputs?.length) {
          const outputTitle = document.createElement('p');
          outputTitle.innerHTML = '<strong style="color:var(--ink-soft);">Outputs</strong>';
          card.appendChild(outputTitle);
          const outputList = document.createElement('ul');
          template.outputs.forEach(out => {
            const li = document.createElement('li');
            li.textContent = out;
            outputList.appendChild(li);
          });
          card.appendChild(outputList);
        }

        templateDeckEl.appendChild(card);
      });
    }

    function renderScorecard() {
      scoreDeckEl.innerHTML = '';
      const scorecard = state.data.scorecard;
      Object.entries(scorecard).forEach(([key, value]) => {
        const card = document.createElement('article');
        card.className = 'card';
        const title = document.createElement('h3');
        title.textContent = key.charAt(0).toUpperCase() + key.slice(1);
        card.appendChild(title);

        const definition = document.createElement('p');
        definition.textContent = value.definition;
        card.appendChild(definition);

        const measures = document.createElement('div');
        measures.className = 'score-item';
        const measureTitle = document.createElement('p');
        measureTitle.innerHTML = '<strong style="color:var(--ink-soft);">Measures</strong>';
        measures.appendChild(measureTitle);
        const list = document.createElement('ul');
        value.measures.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item;
          list.appendChild(li);
        });
        measures.appendChild(list);
        card.appendChild(measures);

        scoreDeckEl.appendChild(card);
      });
    }

    function renderCoachNotes() {
      coachNotesEl.innerHTML = '';
      state.data.coachNotes.forEach(note => {
        const card = document.createElement('article');
        card.className = 'card';
        const p = document.createElement('p');
        p.textContent = note;
        card.appendChild(p);
        coachNotesEl.appendChild(card);
      });
    }

    document.getElementById('resetSession').addEventListener('click', () => {
      state.session = [];
      renderSession();
    });

    fetch('../input_json/probecrafter.json')
      .then(resp => resp.json())
      .then(data => {
        state.data = data;
        tagLineEl.textContent = data.tagline;
        metaEl.textContent = `Last updated ${data.lastUpdated} · ${data.probePacks.length} probe packs`;
        buildFilterOptions();
        renderPacks();
        renderSession();
        renderPersonas();
        renderTemplates();
        renderScorecard();
        renderCoachNotes();
      })
      .catch(err => {
        console.error('Failed to load Probecrafter data', err);
        tagLineEl.textContent = 'Could not load probe data. Please refresh.';
      });
  </script>
</body>
</html>
